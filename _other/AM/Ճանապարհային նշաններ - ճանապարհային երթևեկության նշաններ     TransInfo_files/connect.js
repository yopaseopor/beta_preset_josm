var OK=OK||{};OK.CONNECT=OK.CONNECT||{hostName:"https://connect.ok.ru",defaultStyle:"border:0;",frameId:0,uiStarted:false,insideok:false,config:{detectClientCanonical:true,maxQueryLength:400,pingWait:5},insertGroupWidget:function(a,c,b){this.insertWidget(a,"Group","st.groupId="+c,b,250,335);},insertShareWidget:function(d,c,i,f,h,g){var a="st.shareUrl="+encodeURIComponent(c);if(typeof f!=="undefined"){a+="&st.title="+encodeURIComponent(f);}if(typeof h!=="undefined"){a+="&st.description="+encodeURIComponent(h);}if(typeof g!=="undefined"){a+="&st.imageUrl="+encodeURIComponent(g);}var e=this.UTIL.detectCanonicalUrl();if(typeof e==="string"&&e.length>0){var b="&st.canonicalUrl="+encodeURIComponent(e);if((a+b).length<=this.config.maxQueryLength){a+="&st.canonicalUrl="+encodeURIComponent(e);}}this.insertWidget(d,"Share",a,i,170,30);},insertContentWidget:function(a,c,b){this.insertWidget(a,"Content","st.content="+c,b,"100%",180);},insertProfileWidget:function(a,c,b){this.insertWidget(a,"Profile","st.profileId="+c,b,250,335);},insertWidget:function(a,c,d,b,f,e){setTimeout(function(){const g=OK.CONNECT;var j=document.getElementById(a);if(j==null){return"error";}if(typeof b==="undefined"){b="{}";}var l=document.createElement("iframe");l.id="__ok"+c+g.frameId++;l.scrolling="no";l.frameBorder=0;l.allowTransparency=true;l.src=g.hostName+"/dk?st.cmd=Widget"+c+"&"+d+"&st.fid="+l.id+"&st.hoster="+encodeURIComponent(window.location)+"&st.settings="+encodeURIComponent(b)+(g.insideok?"&st.insideok=1":"");l.setAttribute("allowFullScreen","");var k=g.UTIL.parseJson(b);var i=g.defaultStyle;var h=g.UTIL.getJsonAttr(k,"width",f);i+="width:"+h+(h==="100%"?";":"px;");i+="height:"+g.UTIL.getJsonAttr(k,"height",e)+"px;";g.UTIL.applyStyle(l,i);j.appendChild(l);},this.frameId>1||this.insideok?0:this.config.pingWait);},startUI:function(){if(this.uiStarted){return;}this.uiStarted=true;try{if(window.addEventListener){window.addEventListener("message",this.onUI,false);}else{window.attachEvent("onmessage",this.onUI);}top.postMessage("ok_ping","*");}catch(a){}},onUI:function(c){if(c.origin==OK.CONNECT.hostName){var a=c.data.split("$");if(a[0]=="ok_setStyle"){var b=document.getElementById(a[1]);OK.CONNECT.UTIL.applyStyle(b,a[2]);}}else{if("ok_pong"==c.data){OK.CONNECT.insideok=true;}}},UTIL:{applyStyle:function(b,e){var d=e.split(";");for(var a=0;a<d.length;a++){var c=d[a].split(":");if(c.length==2&&c[0].length>0){b.style[c[0]]=c[1];}}},parseJson:function(jsonStr){return eval("(function(){return "+jsonStr+";})()");},getJsonAttr:function(d,b,c){var a=d[b];return a!=null?a:c;},detectCanonicalUrl:function(){if(OK.CONNECT.config.detectClientCanonical!==true){return undefined;}if(!document||!document.getElementsByTagName){return undefined;}var a=document.getElementsByTagName("link");for(var b=0;b<a.length;b++){var c=a[b];if(c&&c.rel==="canonical"&&c.href!==undefined){return c.href;}}var e=document.getElementsByTagName("meta");for(var b=0;b<e.length;b++){var d=e[b];if(d&&d.name==="og:url"&&d.content!==undefined){return d.content;}}return undefined;}}};OK.CONNECT.startUI();